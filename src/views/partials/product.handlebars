<div class="card mb-4 h-100">
	<div class="product-image-container {{#if (getArrayItem thumbnails 1)}}has-hover-image{{/if}}">
		{{#if thumbnails}}
			<img src="{{getArrayItem thumbnails 0}}" class="product-image product-image-front" alt="{{product.title}}" />
		{{else}}
			<img src="/static/producto.png" class="product-image product-image-front" alt="Producto sin imagen" />
		{{/if}}

		{{#if (getArrayItem thumbnails 1)}}
			<img src="{{getArrayItem thumbnails 1}}" class="product-image product-image-back" alt="{{product.title}}" />
		{{/if}}
	</div>

	<div class="card-body d-flex flex-column justify-content-between">
		<h5 class="card-title">{{product.title}}</h5>
		<p class="card-text">{{product.description}}</p>
		<div class="card-price">
			<p class="card-text"><small class="text-muted">Disponibles: {{product.stock}}</small></p>
			<h4 class="card-text">${{product.price}}</h4>
		</div>
		<div class="d-flex align-items-center justify-content-around mt-auto">
			<div class="d-flex gap-2">
				<button class="btn btn-secondary" id="decrement" onclick="changeQuantity(this, -1)">-</button>
				<input type="number" class="form-control p-1" id="quantity" value="1" min="1" max="{{product.stock}}" style="width:45px; text-align: center;" readonly />
				<button class="btn btn-secondary" id="increment" onclick="changeQuantity(this, 1)">+</button>
			</div>
			<button
				class="btn btn-primary"
				title="Agregar al carrito"
				onclick="addProductToCart(this)"
				data-cid="{{cart}}"
				data-pid="{{product._id}}"
				data-uid="{{user._id}}"
			>
				Agregar
			</button>
		</div>
	</div>
</div>
