{{> header}}
<div>
	<h1>Administración de Productos</h1>

	{{! Crear nuevo producto  }}
	<form id="productForm" class="product-form">
		<h4 class="form-group">Nuevo producto</h4>
		<hr />
		<div class="form-group">
			<label for="title">Título:</label>
			<input type="text" id="title" name="title" required />
		</div>
		<div class="form-group">
			<label for="description">Descripción:</label>
			<textarea
				type="text"
				id="description"
				name="description"
				required
			></textarea>
		</div>
		<div class="form-group">
			<label for="code">Código:</label>
			<input type="text" id="code" name="code" required />
		</div>
		<div class="form-group">
			<label for="category">Categoría:</label>
			<input type="text" id="category" name="category" required />
		</div>
		<div class="form-line">
			<div class="form-group">
				<label for="price">Precio:</label>
				<input type="number" id="price" name="price" step="0.01" required />
			</div>
			<div class="form-group">
				<label for="stock">Stock:</label>
				<input type="number" id="stock" name="stock" required />
			</div>
		</div>
		<div class="form-button">
			<button type="submit">Confirmar</button>
		</div>
	</form>

	{{! Lista de productos }}
	<section class="table-products">
		<table>
			<thead>
				<tr>
					<th>Código</th>
					<th>Categoría</th>
					<th>Título</th>
					<th>Descripción</th>
					<th>Precio</th>
					<th>Stock</th>
					<th> </th>
				</tr>
			</thead>
			<tbody id="productsList">
				{{#each products.docs}}
					<tr id="product{{_id}}">
						<td>{{code}}</td>
						<td>{{category}}</td>
						<td>{{title}}</td>
						<td>{{description}}</td>
						<td>{{price}}</td>
						<td>{{stock}}</td>
						<td><button
								class="delete-btn"
								title="Eliminar producto"
								onclick="deleteProduct('{{_id}}')"
							>Eliminar</button></td>
					</tr>
				{{/each}}
			</tbody>
		</table>
	</section>
	<!-- Paginación -->
	<section class="pagination">
		{{#if products.hasPrevPage}}
			<a href="{{products.prevLink}}">Prev</a>
		{{/if}}
		{{#if products.hasNextPage}}
			<a href="{{products.nextLink}}">Next</a>
		{{/if}}
	</section>
</div>

{{! socket.io }}
<script
	src="https://cdn.socket.io/4.7.5/socket.io.min.js"
	integrity="sha384-2huaZvOR9iDzHqslqwpR87isEmrfxqyWOF7hr7BY6KG0+hVKLoEXMPUJw3ynWuhO"
	crossorigin="anonymous"
></script>

{{! Sweet alert }}
<script
	src="https://cdn.jsdelivr.net/npm/sweetalert2@11.10.8/dist/sweetalert2.all.min.js"
></script>

{{! JS cliente  }}
<script src="/static/js/index.js"></script>